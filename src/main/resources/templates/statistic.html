<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Storage System</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

</head>

<body>

<!--<nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm">-->
<!--    <div class="container">-->
<!--        <span class="navbar-brand mb-0 h1">-->
<!--            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="black" class="bi bi-archive" viewBox="0 0 16 16">-->
<!--  <path d="M0 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 12.5V5a1 1 0 0 1-1-1V2zm2 3v7.5A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5V5H2zm13-3H1v2h14V2zM5 7.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>-->
<!--            </svg>-->
<!--            Storage APP-->
<!--        </span>-->
<!--        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">-->
<!--            <span class="navbar-toggler-icon"></span>-->
<!--        </button>-->
<!--        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">-->
<!--            <div class="navbar-nav">-->
<!--                <a class="nav-link" href="/">Home</a>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<div class="container">
    <canvas id ='chart'></canvas>
</div>


<script>
    $.ajax({
        url: "/api/statistic",
        success : function (result){
            console.log(result);

            names = []
            capacity = []
            occupation = []

            result.forEach(function (r){
                names.push(r.name)
                capacity.push(r.capacity)
                occupation.push(r.occupation)
            });

            const ctx = document.getElementById('chart');

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: names,
                    datasets: [{
                        label: 'Capacity',
                        data: capacity,
                        borderWidth: 1
                    }, {
                            label: 'Occupation',
                            data: occupation,
                            borderWidth: 1
                        }]
                },
                options: {
                    scales: {

                    }
                }
            });
    }});


</script>
</body>
</html>